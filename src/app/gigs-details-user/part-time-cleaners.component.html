<div class="page-wrapper">

  <div class="hero-image container">
    <img [src]="heroImageUrl" alt="Hero Image" />
  </div>


  <!-- TOP ROW: Title/Rating/Price on left, Summary card on right -->
  <div class="top-row container">
    
    <div class="top-left">
      <h1>{{ serviceTitle }}</h1>
      <div class="stars-rating">
        <span
          class="star"
          *ngFor="let i of [1,2,3,4,5]"
          [class.filled]="serviceRating >= i"
          [class.half]="(serviceRating >= i - 0.5) && (serviceRating < i)"
          >★</span
        >
        <span class="rating-value">{{ serviceRating }} ({{ serviceReviewsCount }})</span>
      </div>
      <p class="price-info">Starts at USD {{ servicePrice.toFixed(2) }}/hr</p>

      <!-- About The Seller -->
      <section class="about-seller">
        <h2>About The Seller</h2>
        <div class="seller-info">
          <img [src]="sellerAvatarUrl" alt="Seller Avatar" class="seller-avatar" />
          <div>
            <h3>{{ sellerName }}</h3>
            <p class="service-type">{{ sellerServiceType }}</p>
            <div class="seller-stars-rating">
              <span
                class="star"
                *ngFor="let i of [1,2,3,4,5]"
                [class.filled]="sellerRating >= i"
                [class.half]="(sellerRating >= i - 0.5) && (sellerRating < i)"
                >★</span
              >
              <span class="rating-value">{{ sellerRating }} ({{ sellerReviewsCount }})</span>
            </div>
          </div>
        </div>

        <!-- With / Without Cleaning Supplies -->
        <div class="cleaning-supplies">
          <button
            class="supplies-btn"
            [class.active]="!hasCleaningSupplies"
            (click)="toggleCleaningSupplies()"
          >
            Without Cleaning Supplies
          </button>
          <button
            class="supplies-btn"
            [class.active]="hasCleaningSupplies"
            (click)="toggleCleaningSupplies()"
          >
            With Cleaning Supplies
          </button>
        </div>
      </section>
    </div>

    <!-- SUMMARY CARD on the right -->
    <div class="top-right">
      <div class="summary-card">
        <h3>Summary</h3>
        <div class="service-title">{{ serviceName }}</div>
        <div class="qty-selector">
          <button (click)="decrementQty()">-</button>
          <span>{{ quantity }}</span>
          <button (click)="incrementQty()">+</button>
        </div>

        <!-- Price details -->
        <div class="price-row">
          <span>{{ serviceName }}</span>
          <span>${{ basePrice.toFixed(2) }}</span>
        </div>
        <!-- <div class="price-row discount">
          <span>Discount {{ discountPercent }}%</span>
          <span>- ${{ discountAmount.toFixed(2) }}</span>
        </div> -->
        <div class="price-row">
          <span>Taxes and fees</span>
          <span>${{ taxes.toFixed(2) }}</span>
        </div>
        <div class="price-row">
          <span>Service free</span>
          <span>${{ serviceFee.toFixed(2) }}</span>
        </div>
        <div class="total-row">
          <span>Total</span>
          <span>${{ total }}</span>
        </div>
        <button class="hire-btn" (click)="hireMe()">Hire Me!</button>
      </div>
    </div>
  </div>

  <!-- HERO IMAGE (optional, full width) -->
  
  <!-- MAIN CONTENT: Left side tasks/notes/reviews, Right side Vero Promise -->
  <div class="container main-content">
    <div class="left-col">

      <!-- Popular tasks -->
      <section class="popular-tasks">
        <h2>Popular tasks that the maid can do</h2>
        <ul>
          <li *ngFor="let task of tasks">{{ task.name }}</li>
        </ul>
      </section>

      <!-- Please Note -->
      <section class="please-note">
        <h3>Please Note</h3>
        <ul>
          <li *ngFor="let note of notes">{{ note.text }}</li>
        </ul>
      </section>

      <!-- Reviews and Ratings -->
      <section class="reviews-section">
        <h2>Reviews and Ratings</h2>

        <!-- Overall rating + star breakdown -->
        <div class="rating-overview">
          <div class="overall-rating">
            <div class="rating-value-big">{{ overallRating }}</div>
            <div class="stars">
              <span
                class="star"
                *ngFor="let i of [1,2,3,4,5]"
                [class.filled]="overallRating >= i"
                [class.half]="(overallRating >= i - 0.5) && (overallRating < i)"
                >★</span
              >
            </div>
            <p class="review-count">{{ overallReviewCount }} reviews</p>
          </div>
          <div class="star-breakdown">
            <div class="breakdown-row" *ngFor="let breakdown of starBreakdown">
              <span>{{ breakdown.star }} star</span>
              <div class="progress-bar">
                <div class="progress-filled" [style.width.%]="breakdown.percent"></div>
              </div>
              <span>{{ breakdown.percent }}%</span>
            </div>
          </div>
        </div>

        <!-- Most helpful reviews -->
        <div class="helpful-reviews">
          <h3>Most helpful reviews</h3>
          <div class="review-card" *ngFor="let review of reviews">
            <div class="review-header">
              <img [src]="review.avatar" alt="Avatar" class="review-avatar" />
              <div>
                <h4>{{ review.name }}</h4>
                <div class="stars small">
                  <span
                    class="star"
                    *ngFor="let i of [1,2,3,4,5]"
                    [class.filled]="review.rating >= i"
                    [class.half]="(review.rating >= i - 0.5) && (review.rating < i)"
                    >★</span
                  >
                </div>
                <span class="review-rating-value">{{ review.rating }}</span>
              </div>
            </div>
            <p class="review-comment">{{ review.comment }}</p>
            <small class="review-date">{{ review.date }}</small>
          </div>
        </div>
      </section>

    </div>

    <!-- RIGHT COLUMN: Vero Promise -->
    <div class="right-col">
      <div class="vero-promise">
        <h3>Vero Promise</h3>
        <ul>
          <li *ngFor="let item of veroPromiseItems">{{ item }}</li>
        </ul>
      </div>
    </div>
  </div>
</div>
